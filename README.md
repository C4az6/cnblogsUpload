# 上传Markdown文件内的本地图片至博客园

> ​	因为习惯使用Markdown格式做笔记，有时希望将它放到网上方便在任何有网络的地方查找。开始是放到Github中的，但是有时访问的速度太慢了所以准备将笔记放到博客园中，这样访问速度就快了。
>
> ​	但是使用Markdown写的文件中时不时会有几张图片，上传笔记的时候还要一个一个的去本地找照片，再上传到博客园上。如果说一两张图片还好，但是图片多了，这样重复无聊的动作就会让人烦躁，因此便产生了编写能自动上传Markdown中的本地图片，并自动改掉文章中的链接的程序的想法



​	上传图片需要账号信息，但只知道账号密码没啥用，因为不知道上传图片的API接口，而偶然的机会知道了Electron，它可以用HTML，CSS和JavaScript来构建跨平台桌面应用程序的一个开源库。 Electron通过将**Chromium**和Node.js合并到同一个运行时环境中，并将其打包为Mac，Windows和Linux系统下的应用来实现这一目的。

​	也就是说只要用Eletron编写的程序，然后用它登录账号，程序就能存储其session，再使用ajax上传图片，这样就能自动附带上用户的session，然后就能上传图片了。额大概就这意思，反正我是这么理解的，使用说明如下

### 程序界面

程序界面如下，仿照PS做的

![image-20200219175009941](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184244658-372580999.png)

### 登陆账号

然后登录一下账号，这个是加载博客园的登录页面的，绝对放心，不会盗取密码的。

![image-20200219175225531](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184243383-1916793776.png)

### 拖拽MD文件

把md文件拖到左边虚线框内

![image-20200219175644453](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184243542-1517897231.png)

### 拖拽图片文件

找到存放图片的位置，ctrl+a全部复制，不管图片是不是在文章中引用过，程序会自动剔除多余的图片。要注意的是这个是根据正则表达式判断的，我只写了`！[]()`类型的，还有种格式`<img src>`大概长这样的类型并没用考虑。底下有可上传图片的数量，左边虚线框有图片的样子，可以判断上传是否有误。

![image-20200219175919787](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184243692-204451728.png)

### 解析上传

最后点击解析上传就行，程序会将本地地址替换为链接，并输出为一个副本，不用担心对之前的文本有损伤

### 演示

![GIF](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184244417-924726878.gif)

![image-20200219181905440](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184243853-470718546.png)

成功后会产生一个副本，不会对之前的笔记产生影响，现在对比一下内容

![image-20200219182217527](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184243963-1865333155.png)

链接就被替换掉了。

然后将整个文章复制，粘贴到博客园笔记编写处，就行了

还有使用这个软件登录账号好像会挤掉你自己在浏览器中登录的账号，所以方便点，当你解析好自己的笔记后，再点击一下**登录账号**按钮，这时他会提醒你已近登录过了

![image-20200219182819549](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184244081-2052576897.png)

然后返回就行，这时就会回到博客园首页，在这里同样可以上传自己的笔记

![image-20200219182841932](https://img2018.cnblogs.com/blog/1491349/202002/1491349-20200219184244208-1533729717.png)

### 源码与程序

程序蓝奏云链接：https://www.lanzous.com/i9hs2ub

源码Github地址：https://github.com/HeMOua/cnblogsUpload

若有发现bug的道友可以留言提醒我一下，感谢
